<div class="container">
  <form class="register-form" [formGroup]="registerForm" autocomplete="off">
    <h2 style="font-size: 30px">Đổi mật khẩu</h2>
    <div class="row-control">
      <mat-form-field appearance="outline">
        <mat-label>Mật khẩu cũ</mat-label>
        <input
          type="{{ hidePassword ? 'password' : 'text' }}"
          matInput
          placeholder="Mật khẩu"
          formControlName="currentpassword"
        />
        <button mat-icon-button matSuffix (click)="togglePasswordVisibility()">
          <mat-icon>{{
            hidePassword ? "visibility_off" : "visibility"
          }}</mat-icon>
        </button>
      </mat-form-field>
      <div *ngIf="registerForm.get('currentpassword')?.touched">
        <div
          class="info"
          *ngIf="registerForm.get('currentpassword')!.hasError('required')"
        >
          Mật khẩu không được để trống
        </div>
        <div
          class="info"
          *ngIf="
            registerForm.get('currentpassword')!.hasError('minlength') &&
            !registerForm.get('currentpassword')!.hasError('required')
          "
        >
          Mật khẩu phải có ít nhất 6 ký tự
        </div>
        <div
          class="info"
          *ngIf="
            registerForm.get('currentpassword')!.hasError('maxlength') &&
            !registerForm.get('currentpassword')!.hasError('minlength') &&
            !registerForm.get('currentpassword')!.hasError('required')
          "
        >
          Mật khẩu chỉ có thể có tối đa 32 ký tự
        </div>
        <div
          class="info"
          *ngIf="
            registerForm.get('currentpassword')!.hasError('pattern') &&
            !registerForm.get('currentpassword')!.hasError('required') &&
            !registerForm.get('currentpassword')!.hasError('minlength') &&
            !registerForm.get('currentpassword')!.hasError('maxlength')
          "
        >
          Mật khẩu không hợp lệ, mật khẩu phải chứa ít nhất 1 kí tự đặc biệt: Ví
          dụ "#12345,!12345"
        </div>
      </div>
    </div>
    <div class="row-control">
      <mat-form-field appearance="outline">
        <mat-label>Mật khẩu</mat-label>
        <input
          type="{{ hidePassword ? 'password' : 'text' }}"
          matInput
          placeholder="Mật khẩu"
          formControlName="password"
        />
        <button mat-icon-button matSuffix (click)="togglePasswordVisibility()">
          <mat-icon>{{
            hidePassword ? "visibility_off" : "visibility"
          }}</mat-icon>
        </button>
      </mat-form-field>
      <div *ngIf="registerForm.get('password')?.touched">
        <div
          class="info"
          *ngIf="registerForm.get('password')!.hasError('required')"
        >
          Mật khẩu không được để trống
        </div>
        <div
          class="info"
          *ngIf="
            registerForm.get('password')!.hasError('minlength') &&
            !registerForm.get('password')!.hasError('required')
          "
        >
          Mật khẩu phải có ít nhất 6 ký tự
        </div>
        <div
          class="info"
          *ngIf="
            registerForm.get('password')!.hasError('maxlength') &&
            !registerForm.get('password')!.hasError('minlength') &&
            !registerForm.get('password')!.hasError('required')
          "
        >
          Mật khẩu chỉ có thể có tối đa 32 ký tự
        </div>
        <div
          class="info"
          *ngIf="
            registerForm.get('password')!.hasError('pattern') &&
            !registerForm.get('password')!.hasError('required') &&
            !registerForm.get('password')!.hasError('minlength') &&
            !registerForm.get('password')!.hasError('maxlength')
          "
        >
          Mật khẩu không hợp lệ, mật khẩu phải chứa ít nhất 1 kí tự đặc biệt: Ví
          dụ "#12345,!12345"
        </div>
      </div>
    </div>
    <div class="row-control">
      <mat-form-field appearance="outline">
        <mat-label>Nhập lại mật khẩu</mat-label>
        <input
          type="{{ hideConfirmPassword ? 'password' : 'text' }}"
          matInput
          placeholder="Nhập lại mật khẩu"
          formControlName="confirmPassword"
        />
        <button
          mat-icon-button
          matSuffix
          (click)="toggleConfirmPasswordVisibility()"
        >
          <mat-icon>{{
            hideConfirmPassword ? "visibility_off" : "visibility"
          }}</mat-icon>
        </button>
      </mat-form-field>
      <div *ngIf="registerForm.get('confirmPassword')?.touched">
        <div
          class="info"
          *ngIf="registerForm.get('confirmPassword')!.hasError('required')"
        >
          Nhập lại mật khẩu không được để trống
        </div>
        <div
          class="info"
          *ngIf="
            registerForm.get('confirmPassword')!.hasError('minlength') &&
            !registerForm.get('confirmPassword')!.hasError('required')
          "
        >
          Nhập lại mật khẩu phải có ít nhất 6 ký tự
        </div>
        <div
          class="info"
          *ngIf="
            registerForm.get('confirmPassword')!.hasError('maxlength') &&
            !registerForm.get('confirmPassword')!.hasError('minlength') &&
            !registerForm.get('confirmPassword')!.hasError('required')
          "
        >
          Nhập lại mật khẩu chỉ có thể có tối đa 32 ký tự
        </div>

        <div
          class="info"
          *ngIf="
            registerForm.get('confirmPassword')!.hasError('pattern') &&
            !registerForm.get('confirmPassword')!.hasError('required') &&
            !registerForm.get('confirmPassword')!.hasError('minlength') &&
            !registerForm.get('confirmPassword')!.hasError('maxlength')
          "
        >
          Nhập lại mật khẩu không hợp lệ, phải chứa ít nhất 1 kí tự đặc biệt: Ví
          dụ: "#12345, !12345",
        </div>
        <div
          class="info"
          *ngIf="registerForm.hasError('passwordMatchValidator')"
        >
          Mật khẩu không khớp!!
        </div>
      </div>
    </div>
    <div class="row-control row-actions">
      <button
        mat-raised-button
        color="primary"
        type="submit"
        [disabled]="registerForm.invalid"
        (click)="onChange()"
      >
        Đổi mật khẩu
      </button>
    </div>
  </form>
</div>
